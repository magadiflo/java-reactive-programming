# Sección 13: [Opcional] - Context

---

## Introducción

El `Contexto` en `programación reactiva` es un mecanismo parecido a `ThreadLocal` en `programación tradicional`, pero
diseñado específicamente para flujos reactivos. A diferencia de `ThreadLocal`, el contexto en `Reactor`
`es seguro y es inmutable`, lo que evita problemas de concurrencia y efectos colaterales.

### ¿Qué es el contexto y para qué sirve?

`Imagina una petición HTTP`: esta incluye un cuerpo, parámetros de consulta (en caso de GET), y también `cabeceras HTTP`
que llevan metadatos adicionales sobre la solicitud. Estas cabeceras no forman parte directamente del cuerpo o
parámetros, pero transportan información esencial como tokens de autenticación, información de usuario, etc.

De forma similar, en `Reactor`, un `suscriptor` puede asociar información adicional a un flujo reactivo — información
que no necesariamente forma parte de los parámetros del método o del contenido emitido. Esta información se pasa
mediante un objeto llamado `Context`, que funciona como un `mapa inmutable` de pares `clave/valor`, algo parecido a las
cabeceras HTTP.

Este mecanismo es muy útil para manejar aspectos transversales (`cross-cutting concerns`) como:

- Autenticación y autorización
- Limitación de velocidad (rate limiting)
- Monitoreo y trazabilidad
- Propagación de datos de contexto sin contaminar la lógica del Publisher

De esta manera, el contexto permite desacoplar estas responsabilidades y mantener limpio el código de los productores de
datos (publishers).

![01.png](assets/section-13/01.png)

### Flujo con múltiples productores

En aplicaciones reales, no tendrás solo un productor, un operador y un suscriptor como en ejemplos simples. En cambio,
puedes tener flujos complejos donde:

- Un productor genera datos
- Luego se encadena con uno o más operadores (map, filter, flatMap, etc.)
- Se combinan varios productores con operadores como concat, merge, etc.
- Finalmente, un suscriptor consume el flujo combinado

En estos escenarios, puede ser necesario pasar información contextual a todos los productores u operadores involucrados
en el flujo.

Modificar la firma de cada método para pasar datos adicionales es engorroso y propenso a errores. Por eso, el `Context`
actúa como un objeto oculto, accesible por todos los operadores y productores del flujo, permitiendo compartir
información sin modificar la lógica principal ni las firmas de los métodos.
